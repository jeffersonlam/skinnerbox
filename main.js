"use strict";var box=document.getElementById("box");box.addEventListener("click",clickBox);var moneyDisplay=document.getElementById("money"),achievementsList=document.getElementById("achievements-list"),shopIcon=document.getElementsByClassName("shop-icon")[0],shopItemList=document.querySelector(".shop-item-list");shopIcon.addEventListener("click",clickShopIcon);var shopItems=[{price:1,name:"Make it Rain $1",description:"A little fun never hurt anyone."},{price:2,name:"Make it Rain $2",description:"Twice the fun."},{price:5,name:"Make it Rain $5",description:"More fun for everyone!"},{price:10,name:"Make it Rain $10",description:"You could buy a meal with that."},{price:20,name:"Make it Rain $20",description:"That's two meals worth of money."}];shopItems=buildShopItems(shopItems);var buyBtn=document.getElementById("buy-btn");buyBtn.addEventListener("click",buyItem);var animation="shake",counter=0,money=0,achievements=[{title:"A Journey of a Thousand Clicks Starts With a Single Click",clicks:1},{title:"What's A Skinner Box?",clicks:15},{title:"This Is A Skinner Box",clicks:40},{title:"The Conditioning Begins",clicks:75},{title:"Nothing Beats Watching Numbers Go Up",clicks:150},{title:"What's The Money For, Anyway?",clicks:225},{title:"It's Not Too Late To Quit",clicks:300},{title:"It's A Nice Day Outside",clicks:400},{title:"Your Family and Friends Are Worried",clicks:500},{title:"Your Pet Needs Food",clicks:600},{title:"Have You Eaten Yet?",clicks:700},{title:"Don't Forget About Your Laundry",clicks:800},{title:"Maybe It's Time For Bed",clicks:900},{title:"The Big 1k",clicks:1e3},{title:"I'm Sorry For Creating This",clicks:1100},{title:"What Have I Done?",clicks:1200},{title:"Too Late To Turn Back Now",clicks:1300},{title:"The Final Stretch",clicks:1400},{title:"The End! Thank You For Playing",clicks:1500},{title:"No, Really. There Is No Need To Continue",clicks:1600},{title:"Guess I Can't Stop You",clicks:1700},{title:"A Man Chooses, A Slave Obeys",clicks:1e4}];achievements=buildAchievementCards(achievements);var canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight;var activeShopItem=shopItems[0];function clickBox(e){counter++,money++;var t=e.target,i=t.cloneNode(!0);i.className="box "+animation,i.addEventListener("click",clickBox),t.parentNode.replaceChild(i,t),animation="shake"==animation?"shake2":"shake",moneyDisplay.innerHTML=money,displayPopup("+1",e.clientX,e.clientY,500),checkCounter(),checkItemPrice()}function displayPopup(e,t,i,n){var c=document.createElement("div");c.classList.add("popup"),c.style.animationDuration="".concat(n,"ms"),c.style.top=i-40+"px",c.style.left=t-20+"px";var a=document.createElement("div");a.innerHTML=e;var o=Math.floor(10*Math.random())-5;a.style.transform="rotate("+o+"deg) translatex("+o+"px)",c.appendChild(a),document.body.appendChild(c),setTimeout(function(){c.parentNode.removeChild(c)},n)}function checkCounter(){var e=!0,t=!1,i=void 0;try{for(var n,c=achievements[Symbol.iterator]();!(e=(n=c.next()).done);e=!0){var a=n.value;if(counter==a.clicks)return void displayAchievement(a.card)}}catch(e){t=!0,i=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw i}}}function displayAchievement(e){achievementsList.appendChild(e),e.classList.add("popIn"),wait(5e3).then(function(){return e.classList.add("popOut"),wait(700)}).then(function(){return e.classList.add("minimizeOut"),wait(500)}).then(function(){e.parentNode.removeChild(e)})}function wait(t){return new Promise(function(e){return setTimeout(function(){return e()},t)})}function buildAchievementCards(e){return e.forEach(function(e){var t=document.createElement("li");t.classList.add("achievement-container"),t.innerHTML='\n    <div class="achievement-card">\n      <img src="https://placeimg.com/80/80/animals"/>\n      <div class="content">\n        <h5>Achievement unlocked!</h5>\n        <h4>'.concat(e.title,"</h4>\n      </div>\n    </div>\n    "),e.card=t}),e}function clickShopIcon(e){e.target.parentNode.classList.toggle("active")}function clickShopItem(t){t.target!=activeShopItem&&(activeShopItem.html.classList.remove("active"),(activeShopItem=shopItems.find(function(e){return e.html==t.target})).html.classList.add("active"),setActiveItem(),checkItemPrice())}function setActiveItem(){var e=document.querySelector(".item-name"),t=document.querySelector(".item-description");t.textContent=activeShopItem?(e.textContent=activeShopItem.name,activeShopItem.description):e.textContent=""}function checkItemPrice(){if(activeShopItem){var e=activeShopItem.price;buyBtn.disabled=!(e<=money)}else buyBtn.disabled=!0}function buyItem(e){money-=activeShopItem.price,moneyDisplay.innerHTML=money,displayPopup("-$".concat(activeShopItem.price),e.clientX,e.clientY,1e3),checkCounter(),checkItemPrice(),makeItRain(activeShopItem.price)}function buildShopItems(e){return e.forEach(function(e){var t=document.createElement("li");t.classList.add("shop-item"),t.dataset.price=e.price,t.textContent="$".concat(e.price),e.html=t,shopItemList.appendChild(t),t.addEventListener("click",clickShopItem)}),e}shopItems[0].html.dispatchEvent(new Event("click"));var rainingMoney=[];function makeItRain(e){for(var t=0;t<e;t++){var i={text:"ðŸ’¸",x:Math.random()*window.innerWidth-40+40,y:-10-Math.random()*window.innerHeight/10};rainingMoney.push(i)}}function moveRain(){for(var e=0;e<rainingMoney.length;e++){var t=rainingMoney[e];ctx.fillText(t.text,t.x,t.y),t.y+=2+4*Math.random(),t.y>window.innerHeight+50&&rainingMoney.splice(rainingMoney.indexOf(t),1)}}function draw(){ctx.canvas.width=window.innerWidth,ctx.canvas.height=window.innerHeight,ctx.font="50px serif",moveRain(),window.requestAnimationFrame(draw)}draw();